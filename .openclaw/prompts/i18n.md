# Prompt: i18n Management (19 Locales)

> Trigger: After UI text changes or on-demand audit
> Scope: Audit, sync, and fix all 19 locale files

## Instruction

Agiere als i18n Engineer für die Anamnese-App. Die App unterstützt 19 Sprachen.

### Locales
```
ar, de, el, en, es, fa, fr, it, ja, ko, nl, pl, pt, ro, ru, tr, uk, vi, zh
```
Referenz-Locale: `de` (Deutsch — primäre Sprache der medizinischen App)

### Audit Workflow

**Step 1: Run Audit**
```bash
node scripts/audit-i18n-keys.js 2>&1 | tee buildLogs/i18n_audit_$(date +%Y%m%d_%H%M%S).log
```

**Step 2: Analyse Output**
- Fehlende Keys pro Locale identifizieren
- Verwaiste Keys (in Locale aber nicht im Code) identifizieren
- Strukturell falsch verschachtelte Keys finden

**Step 3: Auto-Fix**
```bash
npm run i18n:audit:fix 2>&1 | tee buildLogs/i18n_fix_$(date +%Y%m%d_%H%M%S).log
```

**Step 4: Manuelle Keys**
Für neue Keys, die nicht automatisch übersetzt werden können:
- Setze den `de`-Wert als Default
- Markiere mit `// TODO: translate` Kommentar im JSON
- Erstelle Issue: `gh issue create --title "i18n: translate new keys" --label i18n`

**Step 5: Verifikation**
```bash
npm test -- --ci --testPathPattern="i18n" 2>&1 | tee buildLogs/jest_i18n_$(date +%Y%m%d_%H%M%S).log
```

### Key-Konventionen
```
<screen>.<element>     → export.title, export.hint
common.<element>       → common.error, common.cancel
validation.<rule>      → validation.required, validation.emailInvalid
```

### DSGVO-Compliance für i18n
- Keine PII in Translation-Keys oder Values
- Datenschutz-Texte (consent, GDPR) müssen rechtlich geprüft sein
- Medizinische Fachbegriffe: Konsistente Übersetzung über alle Locales

### Fehler-Handling
- Mis-verschachtelte Keys (z.B. `voiceRecognition.voiceRecognition.xyz`) sofort fixen
- Duplicate Keys: Deduplizieren, den konsistenteren Wert behalten
- UTF-8 BOM: Alle Locale-Dateien müssen UTF-8 ohne BOM sein
